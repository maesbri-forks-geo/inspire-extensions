---
layout: default
slug:   extension-methodology
title:  INSPIRE data specification extensions - The Extension Methodology
---
<section>

    <h2>The Extension Methodology</h2>

    <p>In this section, we'll explain step by step how you can design and implement a data model that re-uses INSPIRE data
        specifications. We will focus on the methodological aspects, not on steps in concrete tools. You'll find an
        example of how to use tools in the <a href="/tutorial/tutorial.html" target="_blank">End-to-End Tutorial Project</a>.</p>

    <table class="alert-warning important-info">
        <tr>
            <td style="width:3em"><div class="important-info-icon"><span class="glyphicon glyphicon-exclamation-sign" style="font-size:2em"></span></div></td>
            <td>This section assumes you have basic knowledge of the <a href="/inspire-mda.html#glossary" target="_blank">terms and concepts</a> used in INSPIRE.</td>
        </tr>
    </table>

    <h2><a name="process" id="process" href="#process"></a>Process Phases</h2>

    <p>In your daily work, you will be confronted with requirements to use standardized data in order to fulfil a certain task. Such requirements often have a legal foundation, such as a European directive that requires monitoring and reporting. Examples for reporting directives include the Air Quality directive and the Marine directive. National legislation also often requires standardisation. As an example, the new Spatial Planning Act in the Netherlands mandates interoperability. </p>
    <p>Even when no legal foundation requires the use of standards, building on interoperable data can yield huge efficiency gains. With the INSPIRE framework, you have a great starting point to develop interoperable infrastructures that fully cover your organisation's use cases. That is when extending INSPIRE is the way forward.</p>

    <p>This section gives you an overview of the whole process, which has seven main phases:</p>

    <ol>
        <li><strong>Organise:</strong> Build your working group, define your process and discuss work agreements</li>
        <li><strong>Analyse:</strong> Identify and analyse requirements, evaluate existing models and the INSPIRE data specifications, prioritize work</li>
        <li><strong>Compare:</strong> Compare the requirements with existing models and the INSPIRE Data Specifications</li>
        <li><strong>Design:</strong> Create or modify your model extension </li>
        <li><strong>Validate:</strong> Test and validate the model extension through implementation on the target platform, data integration, and usage</li>
        <li><strong>Consult:</strong> Invite all stakeholders and the public to test and review the design based on the services created during validation</li>
        <li><strong>Operate:</strong> Deploy and operate the model extension in view and download services</li>
       </ol>

    <p>You will iterate over all of these phases multiple times. Typically, iterations that include a release will take weeks, while iterations where you design and implement features will take only minutes, hours or at most weeks:</p>

    <div style="margin: 20px">
        <img src="/images/process-overview.png" title="Overview of the extension methodology" style="width: 60%; min-width: 400px; margin-left: 20%; margin-right: 20%">
    </div>

    <h2><a name="organisation" id="organisation" href="#organisation"></a>Organisation and Working Agreements</h2>

    <p>First of all, you need to get organised. This means understanding who should be on the working group,
        distributing roles and responsibilities, setting work agreements, choosing tools, and more aspects. Let's start
        with you.</p>

    <h3>Who are you?</h3>

    <p>You will be the facilitator for the team that will design and
        implement the model. As you are hopefully not working alone, you do not need to be an expert at all required
        skills, but you should have the following skills:</p>
    <ol>
        <li>You are a good moderator</li>
        <li>You are a good technical writer who writes concise, easy to understand prose</li>
        <li>You have basic understanding of the domain the model should cover</li>
        <li>You understand basic modelling concepts such as classes and properties</li>
    </ol>

    <p>If you join the team as a domain expert, make sure you assume a neutral role as a facilitator and moderator. Try to look at the domain with a new, fresh view. When you do so, you will be able to separate the domain requirements and the ‘way things work’ in the domain and are natural for the domain experts – and sometimes difficult to let go. </p>

    <h3>Your Team</h3>

    <p>Any data harmonisation projects needs people with a wide range of skills. A typical team size is 3-10 people, though larger teams occasionally form to define a model. When you build your team, make sure to have the following profiles on board:</p>

    <ol>
        <li><strong>Supporting Stakeholder</strong>: These persons have organisational and policy-making influence and supports the project by providing required resources. They are essential to the long-term success of the project.</li>
        <li><strong>Domain Experts</strong>: These people, like you, are experts in the domain to be modelled and know it well from years of hands-on work. They are familiar with the specific shared terminology, but every one provides a different perspective, e.g. from research and from data collection.</li>
        <li><strong>Standards and Modelling Expert</strong>: This person knows ISO, OGC and ideally INSPIRE standards well and has very good knowledge of at least one schema language.</li>
        <li><strong>Integration Expert</strong>: This person will help you to integrate actual data into the new model, by using data transformation tools such as XSLT, <a href="http://www.safe.com/fme" target="_blank">FME</a> or <a href="https://www.wetransform.to/products/halestudio/" target="_blank">hale studio (Open Source)</a>.</li>
        <li><strong>Implementation Expert</strong>: This person knows all about specific tools used in the process, such as model transformation tools, modelling tools, databases and service publishing frameworks. Typically, they support many projects and support your activity part-time.</li>
    </ol>

    <div style="margin: 20px">
        <img src="/images/team.png" title="Overview of the extension methodology" style="width: 80%; min-width: 400px; margin-left: 10%; margin-right: 10%">
    </div>

    <h3>Work Agreements</h3>

    <p>Whenever you collaborate with a team, you need to clearly define the rules under which you will cooperate up-front. In agile software development, we call these rules work agreements. You should consider the following areas for work agreements:</p>

    <ul>
        <li><strong>Roles:</strong> Does everybody in the team have the same responsibilities? Is one person responsible for monitoring the process and improving it, like a <a href="https://en.wikipedia.org/wiki/Scrum_%28software_development%29#Scrum_master" target="_blank">SCRUM master</a>?</li>
        <li><strong>Iterations:</strong> How long will your development iterations be? How many iterations will you go through in the team? How many limited or public releases will you make to gather feedback from outside the team?</li>
        <li><strong>Documentation:</strong> How will you document the model itself, the process you're following and the decisions made during the project? Will others be able to use this documentation to emulate what you did?</li>
        <li><strong>Capacity Building:</strong> How will you actively increase the capacity of your team? Will you identify skill deficits and address them through trainings or through pulling in advisors (internal or external)?</li>
        <li><strong>Natural Language usage:</strong> Will you develop the model in English or in your local language? Will you provide translations?</li>
        <li><strong>Meetings:</strong> How often will you be able to meet in person or online? How do you get the most our of such meetings?</li>
        <li><strong>Communication:</strong> How often will you be able to meet in person or online? How do you get the most our of such meetings? How do you communicate asynchronously?</li>
        <li><strong>Change Management:</strong> How will you deal with external changes, such as new INSPIRE data specification versions, new version of regional standards, or a change in your technical requirements?</li>
        <li><strong>Time and commitment:</strong> How long will the project go? What level of commitment will you get from each of the involved team members?</li>
        <li><strong>Working Environment:</strong> How do you decide which tools and technologies to use?</li>
    </ul>

    <p>If you decide to translate the INSPIRE data specification to your spoken language, make sure to check out the <a href="http://inspire.ec.europa.eu/featureconcept" target="_blank">INSPIRE Feature Concept Dictionary</a>. It contains all the domain terms used in INSPIRE and provides translations for all official languages of the EU.</p>

    <h3>Working Environment and Tools</h3>

    <p>It's also helpful to agree on a set of tools that everybody uses, to reduce interoperability challenges inside the team. Take into account previous experience, available licenses and suitability for the project at hand. Typically, you will need the following types of tools:</p>

    <ul>
        <li><strong>Project Management</strong>: A place where you track tasks, progress, documents and other artifacts related to the project. It should be easy to access and to use. Typical products used for this purpose include <a href="https://en.atlassian.com/software/jira" target="_blank">Jira</a>, <a href="http://www.redmine.org/" target="_blank">Redmine (Open Source)</a> or <a href="https://github.com/" target="_blank">Github</a> and <a href="https://about.gitlab.com/" target="_blank">Gitlab</a>.</li>
        <li><strong>Communication</strong>: A central place for all communication can be incredibly helpful for documentation and understanding how a project developed. This archive should be searchable and easily accessible. Typical choices include a mailing list, or tools like <a href="https://hipchat.com/" target="_blank">HipChat</a> or <a href="https://slack.com/" target="_blank">Slack</a>.</li>
        <li><strong>Source Code Management</strong>: You will benefit greatly from using a proper source and version control repository for your model from the start on. Such tools enable effective cooperation even in larger or distributed teams and allow you to review progress, and they have become much easier to use thanks to sites like Github. The three most common tools are <a href="https://www.mercurial-scm.org/" target="_blank">Mercurial</a>, <a href="https://git-scm.com/" target="_blank">Git</a> and <a href="https://subversion.apache.org/" target="_blank">Subversion (SVN)</a>. Which one you use will depend on the modelling software you use.</li>
        <li><strong>Data Modelling</strong>: The tool you use to design the actual model extension. Use an UML Editor such as <a href="http://www.sparxsystems.com.au/" target="_blank">Enterprise Architect</a> or <a href="http://argouml.tigris.org/" target="_blank">ArgoUML (Open Source)</a>.</li>
        <li><strong>Model Validation</strong>:ISO/TC211 provides Enterprise Architect Model <a href="https://github.com/ISO-TC211/UML-Best-Practices" target="_blank">Validation Scripts</a> you can use to test your model's compliance to the ISO guidance on which INSPIRE data specifications are built.</li>
        <li><strong>Schema Generation</strong>: When you design your model in a conceptual language like UML, you need to transform it to an implementation language before you can actually use it. While some of the data modelling tools listed, like Enterprise Architect, have such capabilities, you will need a specific schema generation tool to generate valid INSPIRE GML Application Schemas. For that, there is a specific tool: <a href="http://shapechange.net/" target="_blank">ShapeChange (Open Source)</a>. If you absolutely need to edit the generated XML Schema or extend a code list later in the process, you can do so in any programmer's text editor. There is also specialized software available such as <a href="http://www.altova.com/xmlspy.html" target="_blank">XMLSpy</a>.</li>
        <li><strong>Data Transformation</strong>: Your model under design needs to be tested, and that can only be done meaningfully by filling it with data. This process, also known as transformation testing, is done with data transformation software, sometimes also called ETL (Extract Transform Load). The most commonly used products for this purpose are <a href="https://en.wikipedia.org/wiki/XSLT" target="_blank">XSLT</a>, <a href="http://www.safe.com/fme" target="_blank">FME</a> and <a href="https://www.wetransform.to/products/halestudio/" target="_blank">hale studio (Open Source)</a>.</li>
        <li><strong>Service Publishing</strong>: At the end, a successful implementation extending INSPIRE requires you to set up view and download services, and you will need to test your model extension by deploying such services. There are several options available for publishing services using the GML Application Schemas, such as <a href="http://www.deegree.org/" target="_blank">deegree (Open Source)</a>, <a href="http://docs.geoserver.org/stable/en/user/data/app-schema/" target="_blank">GeoServer with app-schema (Open Source)</a> and <a href="http://www.interactive-instruments.de/xtraserver/" target="_blank">ArcGIS Server with XtraServer</a>.</li>
        <li><strong>A GIS client</strong>: You will use this software to analyse both the source data and transformed data. Since INSPIRE uses <em>complex feature GML</em> as a base, it is challenging to use in desktop GIS. Some GIS software does have limited complex features GML support, such as <a href="https://www.qgis.org" target="_blank">QGIS (Open Source)</a>.</li>
    </ul>

    <h2><a name="analysis" id="analysis" href="#analysis"></a>Requirements Analysis</h2>

    <p>After getting organised, it is time to scope the project in detail and to decide what exactly needs to be done in which order. The core activities in this phase revolve around the identification and analysis of requirements from the national and European level. The objective of the analysis is to understand how the model will be used by its future stakeholders and what they really require. You will also define metrics that you can use to measure progress during the project, and to assess successful completion. We recommend a structured user-centered approach to the analysis, with the following steps:</p>

    <ol>
        <li>Scope Analysis</li>
        <li>Stakeholder Identification and Persona building</li>
        <li>Scenarios</li>
        <li>User Stories</li>
        <li>Technical Requirements</li>
    </ol>

    <p>Personas, scenarios and user stories are all related to each other, and help getting a clearly motivated, consistent picture of the requirements, without getting lost in details too early in the process:</p>

    <div style="margin: 20px">
        <img src="/images/user-analysis.png" title="The relation between Personas, Scenarios and User Stories" style="width: 50%; min-width: 400px; margin-left: 25%; margin-right: 25%">
    </div>

    <p>The following sections will explain how to work with these to define a fit for purpose data model.</p>

    <h3>Scope Analysis</h3>

    <p>In a first step, write down the trigger business case that initiated the process. Try to describe the full case without going into the details. Then, gather all relevant documents that define what you need to do. These might be legal texts such as implementation regulations, or technical texts created by specialist departments. They also include relevant INSPIRE documentation that falls into the same thematic area like your trigger business case. If there are no texts to draw upon, ask each of the domain experts in your team to describe their current or envisaged workflows in detail, similar to the <a href="#scenarios">scenario</a> described below.</p>

    <p>To identify statements relevant for your data model, perform a so-called <em>Lexical Analysis</em>. Find <strong>nouns</strong> that describe spatial objects or their properties in their story telling and the documents gathered. Clearly mark what is required and what is optional. Consider the following example, where all relevant nouns are marked bold:</p>

    <blockquote>The responsibility for registering applications relating to land rights including <strong>ownership</strong>, <strong>mortgages</strong>, <strong>burdens</strong> and <strong>easements</strong> rests with the Land Registry...</blockquote>

    <p>In the end of this process, you should have a list of data elements you will need to include in your model. The next step is sort this list, so that the most important and high-business-value items are at the top of the list. This list &ndash; often also called a <strong>backlog</strong> -&ndash; could look like this:</p>

    <ul>
        <li>
            Object type: Ownership Registration
            <ul>
                <li>Property: Date of submission</li>
                <li>Property: Submitting legal entity</li>
                <li>Property: Owner legal entity</li>
            </ul>
        </li>
        <li>
            Object type: Mortgage
            <ul>
                <li>Property: Date of submission</li>
                <li>Property: Submitting legal entity</li>
                <li>Property: Land record Identifier</li>
                <li>Property: Additional securities</li>
            </ul>
        </li>
    </ul>

    <h3>Personas</h3>

    <p>One of the first steps to build a model extension is to identify its future stakeholders. Who will be working directly with data in that model? Who will be affected by analysis and decisions made on that data model? Make a list of the individuals you know that are going to be directly or indirectly affected by your work. Group them by function, skills and needs. Then, build between one and three so-called <em>personas</em> based on the most important stakeholder groups. A  persona defines an archetypical user of your data model. The idea is that if you want to design effective systems, they need to be designed for specific people. In other words, personas represent fictitious people which are based on your knowledge of real users. Here is an example persona:</p>

    <ul>
        <li><strong>Name:</strong> Angela Müller</li>
        <li><strong>Position:</strong> Team Lead Geoinformation for the County Müllerhausen</li>
        <li><strong>Education:</strong> M.Sc. Geography</li>
        <li><strong>Technical Knowledge:</strong> ArcGIS (+++), Excel (+), Word (+), JIRA (+), Git (+), Python (++), UML (+)</li>
    </ul>

    <h3><a name="scenarios" id="scenarios" href="#scenarios"></a>Scenarios</h3>

    <p>A scenario is a narrative that tells how one specific persona will work with the data. The scenario also explains why that persona executes the workflow. It explains one specific workflow, without variants, from end to end, and uses the persona's vocabulary. The scenario should contain at least some of the object types and properties you have identified in the scope analysis. Consider this example scenario:</p>

    <blockquote>
        Angela needs to publish an updated version of the Ownership Registrations data set she is responsible for, because her colleague Mark needs the new data which contains additional information on submitters to implement a new and improved internal administrative process. She logs in to the system, goes to the data sets list, identifies the one she wants to update, and clicks on it. She goes to the files tab and deletes all files, then uploads the new files. She waits for a moment until the system tells her all files are valid, then the proceeds with metadata entry. After that is done, she triggers the service update. She notifies her colleague Mark.
    </blockquote>

    <h3>User Stories</h3>

    <p>A <a href="https://en.wikipedia.org/wiki/User_story" target="_blank">User Story</a> describes the "who", "what" and "why" of a requirement to a software system in a simple, concise way. It may consist of one or more sentences in the language of the end user. User stories originate from agile software development methodologies as the basis for defining the functions a business system must provide. A simple example for a user story is:</p>

    <blockquote>As a data manager, I <em>must</em> be able to upload a GML file to create a predefined dataset download service.</blockquote>

    <p>This single sentence identifies the actor (stakeholder), what they need to do (upload a file) and gives the reason why the functionality is required. The sentence also contains a key word that indicates the business value of the requirement. In the example, it's <em>must</em>, the strongest of the three keywords commonly used, the other two being <em>should</em> and <em>could</em>. User stories can also serve you well when creating a data model, such as in this example:</p>

    <blockquote>As a data manager, I must be able to combine multiple land parcels into one land parcel, without loosing records of the individual parcels.</blockquote>

    <p>This requirement provides a basis for several elements of your data model. A solution to implement this requirement might be to add a class <code>JoinedParcel</code> to manage parcel joins, and to give it a reference to a <code>Set</code> of <code>Parcels</code>, to satisfy this requirement.</p>

    <p>A User Story is often more than just a single sentence. Often, the user story needs to be clarified with additional information, such as...:</p>

    <ul>
        <li><strong>Unique Identifier:</strong> A short ID and/or description we can use to reference to the use case, such as &laquo;IE-12 Join Parcels&raquo;.</li>
        <li><strong>Definition of Done (DoD):</strong> A single sentence leaves a lot open to interpretation. The DoD is used to define exactly when the user story is fulfilled. In the GML upload example above, the DoD might read that GML 2.1.x and GML 3.x need to be supported, that files up to 100MB need to be uploaded, and that the system needs to validate files on upload. You can even specify a set of files with which the upload has to work.</li>
        <li><strong>Design:</strong> In some cases, the user story will need a design, e.g. for a user interface or for a data model. Often this design is a draft or a wireframe, not a pixel-perfect final design.</li>
        <li><strong>Preconditions:</strong> Describes the state the system needs to be in before the action. Typical preconditions include authentication or execution of a successful process.</li>
        <li><strong>Postconditions:</strong> Describes the expected output of the action, such as a newly created file being provided to the user for download.</li>
    </ul>

    <h2><a name="comparison" id="comparison" href="#comparison"></a>Comparison with INSPIRE and other Data Specifications</h2>

    <p>Your User Stories, by intent, don't describe the actual data model in detail. If you first create a data model based on the user stories and then compare your model to the INSPIRE data specification, you will have a much harder time to reconcile the two. Instead, we compare the INSPIRE data specification to the User Stories and see which parts of it are already covered.

    <h3>Find your INSPIRE Scope</h3>

    <p>You have three options to understand which INSPIRE Data Specifications are relevant for your model extension. Initially, interested people had to either read through hundreds of pages of PDFs, or to analyse the Enterprise Architect UML files. Thanks to the hard work of the IES team at the JRC, we now have a third option available. The <a href="http://inspire-regadmin.jrc.ec.europa.eu/dataspecification/" target="_blank">INSPIRE Interactive Data Specifications</a>. This online application provides two tools:</p>

    <ol>
        <li><strong>Read and Compare Technical Guidelines:</strong> An index that present the Data Specifications in smaller chunks, and enables side-by-side comparison of different themes. This is useful when you want to determine which data specification is relevant.</li>
        <li><strong>Find Your Scope:</strong> An interactive workflow to identify relevant Spatial Object types in the INSPIRE Data Specifications. You can use this to find out which INSPIRE Data Specifications are relevant for a dataset you’d like to contribute to the infrastructure. The &laquo;Find your Scope&raquo; tool at the end provides you with either documentation (*.doc, *.pdf), a mapping table (*.xls), or as a hale studio mapping project. This project makes it easier for you to get started with producing INSPIRE interoperable data.</li>
    </ol>

    <div style="margin: 20px">
        <img src="/images/find-your-scope.png" title="INSPIRE Find Your Scope tool" style="width: 80%; min-width: 400px; margin-left: 10%; margin-right: 10%">
    </div>

    <p>These tools will help you identify which themes, schemas and spatial object types are relevant for your model extension. Export the list of relevant object types as a document and a mapping table for later work.</p>

    <table class="alert-warning important-info">
        <tr>
            <td style="width:3em"><div class="important-info-icon"><span class="glyphicon glyphicon-exclamation-sign" style="font-size:2em"></span></div></td>
            <td>Make sure you also take a look at the <a href="/models/index.html" target="_blank">Model Extensions Inventory</a> to see if there is an extension you can re-use entirely or use as a blueprint for your work.</td>
        </tr>
    </table>

    <h3>Validate requirements coverage</h3>

    <p>Let's pick up the example from above again and compare that to the <a href="http://inspire.ec.europa.eu/documents/Data_Specifications/INSPIRE_DataSpecification_CP_v3.0.pdf" target="_blank">INSPIRE Cadastral Parcels data specification</a>. In that specification, you'll find this diagram:</p>

    <div style="margin: 20px">
        <img src="/images/inspire-cadastral-parcels.png" title="INSPIRE cadastral parcels UML diagram" style="width: 90%; max-width: 752px; min-width: 400px; margin-left: 5%; margin-right: 5%">
    </div>

    <p>Looking at the data model in detail, there doesn't seem to be a way to cover the parcel join use case with the given data structure. We do however have a <code>CadastralParcel</code> class that might serve as a baseline and connection point to the INSPIRE model. Compare each of your User Stories to the INSPIRE data specification, and build a comparison table similar to this one:</p>

    <table class="table table-responsive table-striped">
        <tr>
            <th>User Story</th>
            <th>Covered</th>
            <th>Not covered</th>
        </tr>
        <tr>
            <td>IE-12 Join Parcels</td>
            <td>The local class Parcel can be matched to the INSPIRE class CadastralParcel. We can use beginLifespan and endLifespan properties to indicate when a JoinedParcel is formed, and when the individual Parcels stopped existing as individual objects.</td>
            <td>The INSPIRE class CadastralParcel has no reference to a set of CadastralParcels that it was made of.</td>
        </tr>
        <tr>
            <td>IE-14 Split Parcels</td>
            <td>The local class Parcel can be matched to the INSPIRE class CadastralParcel. We can use beginLifespan and endLifespan properties to indicate when a new Parcel is formed, and when the individual Parcels stopped existing as individual objects.</td>
            <td>The INSPIRE class CadastralParcel has no reference to a CadastralParcel of which it was split off.</td>
        </tr>
    </table>

    <p>The table uses tentative class names for the missing classes based on the results of the lexical analysis done earlier. Your class names should follow a common naming convention. In INSPIRE, we use <a href="https://en.wikipedia.org/wiki/CamelCase" target="_blank">CamelCased</a>, singular, composite English class names.</p>

    <h3>Compare with existing models</h3>

    <p>In many cases, you already have one or multiple existing local data models - after all, you have been managing parcels or other geospatial objects in the past. When you have such a local data model, perform the same exercise as before. This time, compare the requirements to the local data model, resulting in a second coverage table.</p>

    <table class="alert-warning important-info">
        <tr>
            <td style="width:3em"><div class="important-info-icon"><span class="glyphicon glyphicon-exclamation-sign" style="font-size:2em"></span></div></td>
            <td>All your requirements are covered by the existing INSPIRE Data Specification? Great, you can directly proceed to the <a href="#testing">Testing section</a>!</td>
        </tr>
    </table>

    <h2><a name="extension" id="extension" href="#extension"></a>Designing the Model Extension</h2>

    <p>Finally, it's time to design the actual data model. For the initial design, we want all domain experts in the group to give equal input. For this reason, you should ask  all domain experts to create a draft design in parallel. You will likely go through several iterations of this draft model very quickly, so use easily accessible tools such as Pen and Paper or whiteboards. UML or XSD editors are best used after the model becomes more stable.</p>

    <h3>Rules on INSPIRE Model Extensions</h3>

    <p>The INSPIRE Generic Conceptual Model (GCM) provides the data specification drafting teams and everybody who wants to create related data models with a common framework. The GCM also contains an annex that gives rules how to create an extension to an INSPIRE application schema. You need to consider these rules as a baseline; whatever you model as part of your extension project, you have to fulfill the rules as defined below to produce a valid INSPIRE Extension:</p>

    <ol>
        <li>The extension does not change anything <strong>in</strong> the INSPIRE data specification but normatively references it with all its requirements, such as the Guidelines for the encoding of spatial data</li>
        <li>The extension does not add a requirement that breaks any requirement of the INSPIRE data specification, in particular those defined through the ISO 191xx standard and through the UML profile for INSPIRE</li>
    </ol>

    <p>You may do any of the following in an INSPIRE Extension according to the GCM:</p>

    <ol>
        <li>add new application schemas importing INSPIRE or other schemas as needed</li>
        <li>add new types and new constraints in your own application schemas</li>
        <li>extend INSPIRE code lists as long as the INSPIRE data specification does not identify the code list as a centrally managed, non-extensible code list</li>
        <li>add additional portrayal rules</li>
    </ol>

    <h3>The Design process</h3>

    <p>The design phase has the following steps:</p>

    <ol>
        <li>Choose what <a href="/patterns/index.html#modelPatterns" target="_blank">Model Compatibility patterns</a> in addition to INSPIRE you want to apply</li>
        <li>Create your new Model</li>
        <li>Choose a <a href="/patterns/index.html#classPatterns" target="_blank">Class Extension pattern</a> to define how this new class should be linked to any INSPIRE class</li>
        <li>Create required new classes</li>
        <li>Choose a <a href="/patterns/index.html#propertyPatterns" target="_blank">Property Extension pattern</a> to define how properties in the new class should be linked to any INSPIRE classes or properties</li>
        <li>Add required properties to new classes, including constraints such as the allowed cardinality, adding the <code>nilReason</code> attribute and setting the  <code>nillable</code> flag</li>
        <li>Add external constraints or extend code lists</li>
        <li>Validate that your model does not violate any of the model extension pattern's rules, to ensure compatibility with INSPIRE Data Specifications</li>
    </ol>

    <div style="margin: 20px">
        <img src="/images/process-design-studio.png" title="Iterations in the creation of the initial data model design" style="width: 100%; min-width: 400px;">
    </div>

    <p>When each of the domain experts has finished their model draft, the next step is to compare and merge model designs. Proceed as follows, with each domain expert going through the following routine:</p>

    <ol>
        <li>The domain expert presents their model draft briefly (one to three minutes)</li>
        <li>Each of the other domain experts provides brief feedback (one minute) on things that should be kept (<em>likes</em>) and things that need to be improved (<em>dislikes</em>)</li>
    </ol>

    <p>After all the domain experts have presented their model, the collected <em>likes</em> and <em>dislikes</em> should form the basis for a second draft model. If there are no major points of contention, the project lead uses the feedback and draft models to build the initial model.</p>

    <figure class="figure" style="margin-bottom: 20px">
        <img src="/images/discussing-designs.jpg" class="figure-img img-fluid img-rounded" title="A group creating data model designs">
        <figcaption class="figure-caption small">A working group doing data model design work. Source: <a href="https://gdi-suedhessen.de/" target="_blank">GDI Südhessen</a>, used with permission.</figcaption>
    </figure>

    <p>In later iterations, you may reconsider one of the choices made regarding the pattern type. Example: You find that in implementation, a <a href="patterns/index.html#classPatterns" target="_blank">Class Extension</a> pattern you chose creates unexpected problems, so you go back and shift to a different pattern.</p>

    <table class="alert-warning important-info">
        <tr>
            <td style="width:3em"><div class="important-info-icon"><span class="glyphicon glyphicon-exclamation-sign" style="font-size:2em"></span></div></td>
            <td>When you design a large model with more than 8 to 10 new classes, you can improve model organisation by creating <em>packages</em>. Group classes that are closely related together in such packages. To work on such large models, create the draft design and initial model for each of these packages one at a time.</td>
        </tr>
    </table>

    <h3>Creating the implementation level model</h3>

    <p>After your team has agreed on the conceptual design, you need to create a platform-specific model, most likely with help from the modelling expert and the integration expert. You will need one or more of the following implementation-platform-specific models:</p>

    <ul>
        <li><strong>GML application schema:</strong>
            <ul>
                <li><em>What is it?</em> The default implementation format for interoperable INSPIRE data is the Geography Markup Language (GML). GML is in turn built on the eXtensible Markup Language (XML). What sets XML apart from many other formats is its rich schema language, called XML Schema Definition (XSD), which allows to define structures, constraints, types and many other kinds of schema definitions. </li>
                <li><em>Why do you need it?</em> A GML schema enables you to create compliant download services and interoperable data sets. GML Application Schemas are the only formlaied definitions for INSPIRE. If you decide to use a different schema language to provide services, you will have to prove that you still fulfill all INSPIRE requirements.</li>
            </ul>
        </li>
        <li><strong>Relational Database schema:</strong>
            <ul>
                <li><em>What is it?</em> Most structured data is stored and maintained in <a href="https://en.wikipedia.org/wiki/Relational_database" target="_blank">relational databases</a>. Relational databases organise data into one or more tables (or "relations") of columns and rows, with a unique key identifying each row. The Relational Database schema describes the name of each of these tables, as well as the name of each column, its data type, and constraints that the system should enforce.</li>
                <li><em>Why do you need it?</em> A database schema enables you to create a data management backend without mismatches to the download service's model.</li>
            </ul>
        </li>
        <li><strong>Document Store schema:</strong>
            <ul>
                <li><em>What is it?</em> An alternative to relational database systems that operates with a more flexible approach to data structures. The model is usually far less expressive than a GML Application Schema or a Relational Database schema, but enable you to define collection names, document attributes, indices and some constraints.</li>
                <li><em>Why do you need it?</em> A document store enables you to effectively store objects with different structures and to retrieve them with very high performance.</li>
            </ul>
        </li>
        <li><strong>Generated Domain Class Model:</strong>
            <ul>
                <li><em>What is it?</em> For most programming languages, there are ways to express the structure of the domain model. In Java and most object-oriented languages, you use classes. Generated classes provide a starting point for an implementation with custom business logic.</li>
                <li><em>Why do you need it?</em> Build you own processes and analytics on a domain model that matches the conceptual model.</li>
            </ul>
        </li>
    </ul>

    <p>Tools such as <a href="http://www.sparxsystems.com.au/" target="_blank">Enterprise Architect</a> and <a href="http://shapechange.net/" target="_blank">ShapeChange</a> allow you to create many different types of platform-specific models. The End-to-End Tutorial projects provides more detail on one possible way to create a platform-specific model - in particular, a GML Application Schema.</p>

    <table class="alert-warning important-info">
        <tr>
            <td style="width:3em"><div class="important-info-icon"><span class="glyphicon glyphicon-exclamation-sign" style="font-size:2em"></span></div></td>
            <td>Even though you can achieve a high degree of automation when deriving the platform-specific model from the conceptual model, manual editing after generation is quite common.</td>
        </tr>
    </table>

    <h3>Validation of the Schema</h3>

    <p>When you've generated the logical schema, make sure you validate it against the requirements of a GML Application Schema. As part of the CITE toolbox, the OGC provides a service that allows you to validate your schema.</p>

    <h2><a name="testing" id="testing" href="#testing"></a>Testing and Integration</h2>

    <p>Now that you've created the platform-specific models, it's time to put them to the test. The goal of this phase is to see whether you can implement the model as designed or whether some unforeseen problems pop up. The two main areas we'll be looking at are data integration and data publishing.</p>

    <h3>Data Integration</h3>

    <p>Data integration allows us to see how the platform-specific model actually works when we fill it with real-world data. For this activity, which is also often called transformation testing, we need to choose a set of existing, representative data sets, and then match and integrate them with our new INSPIRE extension model.</p>

    <p>After you've identified the source data sets you'd like to integrate, the first step is to create a mapping between the source data model and the new INSPIRE extension model. Similar to the initial data model design, make use of the domain experts in your group and ask each of them to create a mapping, which you can then merge. To create such a mapping, you have a choice between two approaches.</p>

    <h4>The Matching Table Approach</h4>

    <p>A Matching table is a spreadsheet document that relates elements of the target model to elements of the source model by arranging them next to each other. All you need for this is Microsoft Excel and a template document. You can get custom templates from the <a href="http://inspire-regadmin.jrc.ec.europa.eu/dataspecification/" target="_blank">INSPIRE Find Your Scope tool</a>.</p>

    <figure class="figure" style="margin-bottom: 20px">
        <img src="/images/matching-table.png" class="figure-img img-fluid img-rounded" title="A matching table">
        <figcaption class="figure-caption small">A matching table, with the INSPIRE data types on the left side and the local source model on the right side.</figcaption>
    </figure>

    <p>Such matching tables are an <em>informal definition</em> of a transformation. As you put in free text and can define any relation, matching tables allow you to specify any kind of relationship between source and target model elements. As a result, matching tables are good for capturing intent, but usually require interpretation for the actual data integration. Furthermore, when matching complex models, these tables get really big and complicated, as you will rely on manual lookups a lot.</p>

    <p>After creation of the mapping table, the next step is to implement the transformation, which is the integration expert's main responsibility. The expert will typically use tools such as XSLT, <a href="http://www.safe.com/fme" target="_blank">FME</a> or <a href="https://www.wetransform.to/products/halestudio/" target="_blank">hale studio</a> for this purpose.</p>

    <h4>The Declarative Mapping Approach</h4>

    <p>A declarative mapping consists of a number of relations, where each relation links one or more source data model elements to one or more target data elements via a defined function. In the easiest possible way, you can just use pens and paper to create such a declarative mapping. </p>

    <figure class="figure" style="margin-bottom: 20px">
        <img src="/images/declarative-schema-mapping.png" class="figure-img img-fluid img-rounded" title="Declarative Schema Mapping">
        <figcaption class="figure-caption small">A set of declarative mapping relations</figcaption>
    </figure>

    <p>There are also a number of specific tools available for the creation of declarative mappings, such as <a href="http://www.altova.com/de/mapforce/xml-mapping.html" target="_blank">Altova MapForce</a> (which works with XML only) and <a href="https://www.wetransform.to/products/halestudio/" target="_blank">hale studio (Open Source, works with XML, databases and many file formats)</a>. Declarative mappings created with such tools are <em>executable and formal</em>, which means you can use them to directly create data compliant to the target data model.</p>

    <figure class="figure" style="margin-bottom: 20px">
        <img src="/images/hale-screenshot.png" class="figure-img img-fluid img-rounded" title="hale studio declarative mapping">
        <figcaption class="figure-caption small">A declarative mapping created in hale studio</figcaption>
    </figure>

    <p>Except for the pen and paper approach, all of these tools have a certain learning curve and some limitations regarding what and how data can be transformed, so they might limit you in the discussion. On the other hand, you will be aware of such implementation limits sooner and can work on mitigation strategies.</p>

    <h4>Analysis of the transformed data set</h4>

    <p>After you've created the transformed data sets, you should analyse and measure them. Your goal should be to determine key properties and to set goals on how to improve these indicators in the next versions. Some example indicators include:</p>

    <ol>
        <li><strong>Data Size:</strong> How large is the resultant file or database? How many elements does it contain? What is the ratio between content data volume and structure data volume?</li>
        <li><strong>Model Complexity:</strong> How large is the model itself? Does it have very deep inheritance or aggregation structures? Does it have large loops?</li>
        <li><strong>Conceptual <a href="http://link.springer.com/chapter/10.1007/978-3-642-15300-6_15" target="_blank">Mismatches</a>:</strong> How well did classifications, ranges, geometry types and numeric values match? </li>
        <li><strong>Model Coverage:</strong> How much of the source data were you able to bring into the target model? Did parts of the target model remain empty, or get used only very rarely?</li>
    </ol>

    <h3>Data Publishing</h3>

    <p>In the end, we need to give stakeholders access to the data sets we've created, using our new logical schema. One way to do this is to provide INSPIRE compliant network services. Providing an INSPIRE compliant service has the advantage that you can cover requirements for INSPIRE with the one system, instead of having a separate infrastructure. We have to make sure we can publish the data we've integrated using our new data model. There are several products available for publishing INSPIRE-compliant view and download services, each with slightly different capabilities regarding INSPIRE support. In the end-to-end tutorial, we'll explore one option for data publishing in detail.</p>

    <p>What most of these products have in common is that there are three ways of how to get your data from the previous step published:</p>

    <ol>
        <li><strong>Insert via service interface:</strong> Some products, such as <a href="http://www.deegree.org/" target="_blank">deegree</a>, offer an INSPIRE compliant transactional WFS interface (WFS-T). With a WFS-T interface, you can send compliant GML to the service, which will handle storage and management of the data.</li>
        <li><strong>Insert into backend database:</strong> All products support providing data from a database backend to a WFS (Download Service) interface. To make this work, you will need to import data into the database. Some databases have specific tools, e.g. for importing shapefiles, but usually you will use an ETL tool such as FME or hale studio to directly write to the database.</li>
        <li><strong>Serve from files:</strong> An easy way to create INSPIRE download services is to directly serve files, as created previously. This approach is called a Predefined Dataset Download Service</li>
    </ol>

    <p>Another key component to setting up a compliant INSPIRE service is to add metadata to the data sets and services. We will not touch on that topic in depth here.</p>

    <p>When everything is set up, you're ready to test the service, and through it, your INSPIRE model extension. Testing is usually done manually, through accessible services in client software or systems, but can also be automated. There are various tools available for testing, such as the German <a href="https://testsuite.gdi-de.org/gdi/" target="_blank">GDI-DE testsuite</a>, the <a href="http://validatie.geostandaarden.nl/etf-webapp/testprojects?testdomain=INSPIRE" target="_blank">Geonovum Validator</a>, the <a href="http://cloud.epsilon-italia.it/eenvplus_new/" target="_blank"> Validation Service</a> provided by the OGC and by Epsilon Italia, or the monitoring dashboard provided by <a href="http://www.spatineo.com/">Spatineo</a>.</p>

    <h2><a name="operation" id="operation" href="#operation"></a>Transition to operational usage</h2>

    <p>Alright, you're satisfied with your services and data model after internal testing and analysis in your working group. One step remains - to see how other stakeholders react to the design. In this phase, you should publish your first model and perform a public consultation.</p>

    <p>During this phase, make sure to collect feedback from the users of your data sets or network services. Ask them how the new data model helped or hindered them in their business processes, collect these inputs as new requirements similar to the User Stories and use them to do another release iteration. We recommend to do at least two release iterations (e.g. Alpha and Beta) before calling the model ready for production.</p>

    <p>You should also use this public consultation phase to perform scalability and load testing to see how the design behaves under the load of continued production or beta usage for a while. Quite often, you'll find that a model that performed well for a small amount of data might not work well anymore for large amounts of data.</p>

    <p><em>You've reached the end of this process, congratulations! Let the community participate and <a href="/introduction.html#contributions" target="_blank">submit your model extension</a> to the inventory!</em></p>

</section>

